YUI.add("gallery-event-selection",function(e,t){"use strict";function i(){var t="";return e.config.win.getSelection?t=e.config.win.getSelection().toString():e.config.doc.selection&&(t=e.config.doc.selection.createRange().text),t}var n=e.UA.ios?400:0,r=300;e.Event.define("selection",{on:function(t,r,i,s){var o=s?"delegate":"on";r._notifier=i,r._handle=new e.EventHandle([t[o]("gesturemovestart",function(e){},s),t[o]("gesturemoveend",e.bind(function(t){r._x=t.pageX,r._y=t.pageY,e.later(n,this,this._checkSelection,r)},this),s)])},delegate:function(){this.on.apply(this,arguments)},detach:function(e,t,n){t._handle.detach()},detachDelegate:function(){this.detach.apply(this,arguments)},_checkSelection:function(e){var t=i();t!==""&&e._notifier.fire({selection:t,pageX:e._x,pageY:e._y})}}),e.Event.define("selectionchange",{_poll:null,on:function(t,r,i,s){var o=s?"delegate":"on";r._selection="",r._notifier=i,r._handle=new e.EventHandle([e.on("gesturemovestart",e.bind(function(t){this._unpoll(),r._selection&&e.later(0,this,this._checkSelectionChange,r)},this)),t[o]("gesturemovestart",function(e){},s),t[o]("gesturemoveend",e.bind(function(t){r._x=t.pageX,r._y=t.pageY,e.later(n,this,this._checkSelection,r)},this),s)])},delegate:function(){this.on.apply(this,arguments)},detach:function(e,t,n){this._unpoll(),t._handle.detach()},detachDelegate:function(){this.detach.apply(this,arguments)},_checkSelection:function(t){this._unpoll(),this._checkSelectionChange(t),this._poll=e.later(r,this,this._checkSelectionChange,t,!0)},_checkSelectionChange:function(e){var t=i();t!==e._selection&&(e._selection=t,e._notifier.fire({selection:e._selection,pageX:e._x,pageY:e._y}))},_unpoll:function(){this._poll&&(this._poll.cancel(),this._poll=null)}})},"@VERSION@",{use:["event-move"]});
