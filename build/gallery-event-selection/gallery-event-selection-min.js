YUI.add("gallery-event-selection",function(d){var c=d.UA.ios?400:0,b=300;function a(){if(d.config.win.getSelection){return d.config.win.getSelection().toString();}else{if(d.config.doc.selection){return d.config.doc.selection.createRange().text;}}return"";}d.Event.define("selection",{on:function(h,f,g,e){var i=e?"delegate":"on";f._handle=new d.EventHandle([h[i]("gesturemovestart",function(j){},e),h[i]("gesturemoveend",d.bind(function(j){d.later(c,this,this._checkSelection,g);},this),e)]);},_checkSelection:function(f){var e=a();if(e!==""){f.fire({selection:e});}},detach:function(g,e,f){e._handle.detach();},delegate:function(){this.on.apply(this,arguments);},detachDelegate:function(){this.detach.apply(this,arguments);}});d.Event.define("selectionchange",{on:function(h,f,g,e){var i=e?"delegate":"on";f._selection="";f._poll=null;f._notifier=g;f._handle=new d.EventHandle([h[i]("gesturemovestart",function(j){if(f._selection){f._notifier.fire({selection:""});f._selection="";}},e),h[i]("gesturemoveend",d.bind(function(j){d.later(c,this,this._checkSelection,f);},this),e)]);},_unpoll:function(e){if(e._poll){e._poll.cancel();e._poll=null;}},detach:function(g,e,f){this._unpoll(e);e._handle.detach();},_checkSelection:function(e){this._unpoll(e);this._checkSelectionChange(e);if(d.UA.ios){e._poll=d.later(b,this,this._checkSelectionChange,e,true);}},_checkSelectionChange:function(f){var e=a();if(e!==f._selection){f._selection=e;f._notifier.fire({selection:e});}},delegate:function(){this.on.apply(this,arguments);},detachDelegate:function(){this.detach.apply(this,arguments);}});},"@VERSION@",{skinnable:false,requires:["event-move"]});