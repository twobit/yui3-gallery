YUI.add("gallery-event-selection",function(f){var c=f.UA.ios?400:0,b=300;function a(){if(f.config.win.getSelection){return f.config.win.getSelection().toString();}else{if(f.config.doc.selection){return f.config.doc.selection.createRange().text;}}return"";}var e;function d(){if(e){e.cancel();e=null;}}f.Event.define("selection",{on:function(j,h,i,g){var k=g?"delegate":"on";h._notifier=i;h._handle=new f.EventHandle([j[k]("gesturemovestart",function(l){d();},g),j[k]("gesturemoveend",f.bind(function(l){h._x=l.pageX;h._y=l.pageY;f.later(c,this,this._checkSelection,h);},this),g)]);},delegate:function(){this.on.apply(this,arguments);},detach:function(i,g,h){g._handle.detach();},detachDelegate:function(){this.detach.apply(this,arguments);},_checkSelection:function(h){var g=a();if(g!==""){h._notifier.fire({selection:g,pageX:h._x,pageY:h._y});}}});f.Event.define("selectionchange",{on:function(j,h,i,g){var k=g?"delegate":"on";h._selection="";h._notifier=i;h._handle=new f.EventHandle([j[k]("gesturemovestart",function(l){d();},g),j[k]("gesturemoveend",f.bind(function(l){h._x=l.pageX;h._y=l.pageY;f.later(c,this,this._checkSelection,h);},this),g)]);},delegate:function(){this.on.apply(this,arguments);},detach:function(i,g,h){d();g._handle.detach();},detachDelegate:function(){this.detach.apply(this,arguments);},_checkSelection:function(g){d();this._checkSelectionChange(g);e=f.later(b,this,this._checkSelectionChange,g,true);},_checkSelectionChange:function(h){var g=a();if(g!==h._selection){h._selection=g;h._notifier.fire({selection:g,pageX:h._x,pageY:h._y});}}});},"@VERSION@",{skinnable:false,requires:["event-move"]});