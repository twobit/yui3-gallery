YUI.add("gallery-ytag",function(b){(function(){var k={js:["","O","MS","Moz","WebKit"].filter(function(l){return window[l+"CSSKeyframesRule"];})[0]};k.lowercase=k.js.toLowerCase();if(k.js=="WebKit"){k.js=k.lowercase;}k.css=k.js?"-"+k.lowercase+"-":k.js;k.properties="{"+k.css+"animation-duration: 0.0001s;"+k.css+"animation-name: nodeInserted !important;"+"}";var e=document.getElementsByTagName("head")[0],h=document.createElement("style"),g=document.createTextNode("@"+k.css+"keyframes nodeInserted {"+"from { clip: rect(1px, auto, auto, auto); } to { clip: rect(0px, auto, auto, auto); }"+"}");h.type="text/css";h.appendChild(g);e.appendChild(h);var j=function(m,l,n){switch(xtag.typeOf(n)){case"object":if(xtag.typeOf(m[l])=="object"){xtag.merge(m[l],n);}else{m[l]=xtag.clone(n);}break;case"array":m[l]=xtag.toArray(n);break;default:m[l]=n;}return m;},i=function(l,n,m){return function(o){if(!!~n.match(/(\d+)/g).indexOf(String(o.keyCode))==(m=="keypass")){l.apply(this,xtag.toArray(arguments));}};};xtag={namespace:"x-",prefix:k,tags:{},callbacks:{},sheet:h.sheet,anchor:document.createElement("a"),tagOptions:{content:"",mixins:[],events:{},methods:{},getters:{},setters:{},onCreate:function(){},onInsert:function(){}},eventMap:{animationstart:["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],transitionend:["transitionend","oTransitionEnd","MSTransitionEnd","webkitTransitionEnd"],tap:["ontouchend" in document?"touchend":"mouseup"]},pseudos:{delegate:function(l,o,n,m){var p=xtag.query(this,o).filter(function(q){return q==m.target||q.contains?q.contains(m.target):false;})[0];return p?function(){l.apply(p,xtag.toArray(arguments));}:false;},keystop:i,keypass:i,retain:function(m,p,o,n,l){var q=l[n];return function(){m();if(typeof q!="undefined"){l[n]=q;}};},preventable:function(l,n,m){return function(o){if(!o.defaultPrevented){l.apply(this,xtag.toArray(arguments));}};}},mixins:{request:{onInsert:function(){this.src=this.getAttribute("src");},getters:{"dataready:retain":function(){return this.xtag.dataready;}},setters:{src:function(l){if(l){this.setAttribute("src",l);xtag.request(this,{url:l,method:"GET"});}},"dataready:retain":function(l){this.xtag.dataready=l;if(this.xtag.request&&this.xtag.request.readyState==4){l.call(this,this.xtag.request);}}}}},typeOf:function(l){return({}).toString.call(l).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},toArray:function(m){var l=Array.prototype.slice.call(m,0);return l.hasOwnProperty?l:[m];},hasClass:function(l,m){return !!~l.className.split(" ").indexOf(m);},addClass:function(l,m){if(!xtag.hasClass(l,m)){l.className=(l.className+" "+m);}return l;},removeClass:function(l,m){l.className=l.className.replace(new RegExp("(^|\\s)"+m+"(?:\\s|$)"),"$1");return l;},toggleClass:function(l,m){return !xtag.hasClass(l,m)?xtag.addClass(l,m):xtag.removeClass(l,m);},query:function(m,l){return xtag.toArray(m.querySelectorAll(l));},clone:function(m){var l=function(){};l.prototype=m;return new l();},merge:function(s,o,n){if(xtag.typeOf(o)=="string"){return j(s,o,n);}for(var r=1,m=arguments.length;r<m;r++){var p=arguments[r];for(var q in p){j(s,q,p[q]);}}return s;},wrap:function(l,m){return function(){var n=xtag.toArray(arguments);l.apply(this,n);m.apply(this,n);};},skipTransition:function(l,m,o){var n=xtag.prefix.js+"TransitionDuration";l.style[n]="0.001s";m.call(o);xtag.addEvent(l,"transitionend",function(){l.style[n]="";});},tagCheck:function(l){return l.tagName.match(new RegExp(xtag.namespace,"i"));},getTag:function(l){return(l.tagName?l.tagName.split("-")[1]:"").toLowerCase();},getOptions:function(l){return xtag.tags[xtag.getTag(l)]||xtag.tagOptions;},register:function(l,m){xtag.attachKeyframe("nodeInserted",xtag.namespace+l);xtag.tags[l]=xtag.merge({},xtag.tagOptions,xtag.applyMixins(m));},attachKeyframe:function(m,l){xtag.sheet.insertRule(l+k.properties,0);},extendElement:function(m){if(!m.xtag){m.xtag={};var l=xtag.getOptions(m);for(var n in l.methods){xtag.bindMethods(m,n,l.methods[n]);}for(var n in l.setters){xtag.applyAccessor(m,"set",n,l.setters[n]);}for(var n in l.getters){xtag.applyAccessor(m,"get",n,l.getters[n]);}xtag.addEvents(m,l.events,l.eventMap);if(l.content){m.innerHTML=l.content;}l.onCreate.call(m);}},bindMethods:function(m,l,n){m.xtag[l]=function(){return n.apply(m,xtag.toArray(arguments));};},applyMixins:function(l){if(l.mixins){l.mixins.forEach(function(n){var m=xtag.mixins[n];for(var o in m){switch(xtag.typeOf(m[o])){case"function":l[o]=l[o]?xtag.wrap(l[o],m[o]):m[o];break;case"object":l[o]=xtag.merge({},m[o],l[o]);break;default:l[o]=m[o];}}});}return l;},applyAccessor:function(n,l,m,p){var l=l[0].toUpperCase(),o=m.split(":")[0];xtag.applyPseudos(n,m,function(){n["__define"+l+"etter__"](o,p);},[o,n]);},applyPseudos:function(n,m,o,l){var p=o,l=xtag.toArray(l);if(m.match(":")){m.replace(/:(\w*)(?:\(([^\)]*)\))?/g,function(q,t,s){if(p){var u=xtag.toArray(l);u.unshift(p,s,t);var r=xtag.pseudos[t].apply(n,u);p=r===false?false:r||o;}});}if(p){p.apply(n,l);}},request:function(n,m){xtag.clearRequest(n);var q=n.xtag.request||{};n.xtag.request=m;var p=n.xtag.request,l=n.getAttribute("data-callback-key")||"callback"+"=xtag.callbacks.";if(xtag.fireEvent(n,"beforerequest")===false){return false;}if(q.url&&!m.update&&q.url.replace(new RegExp("&?("+l+"x[0-9]+)"),"")==n.xtag.request.url){n.xtag.request=q;return false;}n.setAttribute("src",n.xtag.request.url);xtag.anchor.href=m.url;if(xtag.anchor.hostname==window.location.hostname){p=xtag.merge(new XMLHttpRequest(),p);p.onreadystatechange=function(){n.setAttribute("data-readystate",p.readyState);if(p.readyState==4&&p.status<400){xtag.requestCallback(n,p);}};["error","abort","load"].forEach(function(r){p["on"+r]=function(s){s.request=p;xtag.fireEvent(n,r,s);};});p.open(p.method,p.url,true);p.setRequestHeader("Content-Type","application/x-www-form-urlencoded");p.send();}else{var o=p.callbackID="x"+new Date().getTime();n.setAttribute("data-readystate",p.readyState=0);xtag.callbacks[o]=function(r){p.status=200;
p.readyState=4;p.responseText=r;xtag.requestCallback(n,p);delete xtag.callbacks[o];xtag.clearRequest(n);};p.script=document.createElement("script");p.script.type="text/javascript";p.script.src=m.url=m.url+(~m.url.indexOf("?")?"&":"?")+l+o;p.script.onerror=function(r){n.setAttribute("data-readystate",p.readyState=4);n.setAttribute("data-requeststatus",p.status=400);xtag.fireEvent(n,"error",r);};e.appendChild(p.script);}n.xtag.request=p;},requestCallback:function(l,m){if(m!=l.xtag.request){return xtag;}l.setAttribute("data-readystate",m.readyState);l.setAttribute("data-requeststatus",m.status);xtag.fireEvent(l,"dataready",{request:m});if(l.dataready){l.dataready.call(l,m);}},clearRequest:function(l){var m=l.xtag.request;if(!m){return xtag;}if(m.script&&~xtag.toArray(e.children).indexOf(m.script)){e.removeChild(m.script);}else{if(m.abort){m.abort();}}},addEvent:function(m,o,n,q){var l=o.split(":")[0],p=(q||xtag.eventMap||{})[l]||[l];p.forEach(function(r){m.addEventListener(r,function(s){xtag.applyPseudos(m,o,n,[s,m]);},!!~["focus","blur"].indexOf(r));});},addEvents:function(m,l,n){for(var o in l){xtag.addEvent(m,o,l[o],n);}},fireEvent:function(l,m,o){var n=document.createEvent("Event");n.initEvent(m,true,true);l.dispatchEvent(xtag.merge(n,o));}};var f=document.createElement;document.createElement=function(l){var m=f.call(this,l);if(xtag.tagCheck(m)){xtag.extendElement(m);}return m;};var d=function(l){if(l.animationName=="nodeInserted"&&xtag.tagCheck(l.target)){xtag.extendElement(l.target);xtag.getOptions(l.target).onInsert.call(l.target);}};xtag.eventMap.animationstart.forEach(function(l){document.addEventListener(l,d,false);});})();xtag.namespace="y-";function a(d){a.superclass.constructor.apply(this,arguments);}a.NAME="ytag";b.extend(a,b.Base,{initializer:function(d){this.register(d.name,d.content,d.selector,d.requires,d.create);},register:function(f,i,e,h,g){var d;xtag.register(f,{content:i,onInsert:function(){var k=b.one(this),j=b.merge(this.dataset,{srcNode:k.one(e?e:"*"),render:true});b.use.apply(b,h.concat(function(l){d=g(l,j);k.plug(c,{instance:d});}));},getters:{ytag:function(){return d;}}});}});function c(d){c.superclass.constructor.apply(this,arguments);}c.NAME="ytagPlugin";c.NS="ytag";c.ATTRS={instance:{}};b.extend(c,b.Plugin.Base,{initializer:function(d){this.set("instance",d.instance);}});b.YTag=a;},"@VERSION@",{skinnable:false,requires:["node","base","plugin"]});