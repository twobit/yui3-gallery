YUI.add("gallery-ytag",function(b){(function(){var j={js:["","O","MS","Moz","WebKit"].filter(function(c){return window[c+"CSSKeyframesRule"];})[0]};j.lowercase=j.js.toLowerCase(),j.js=="WebKit"&&(j.js=j.lowercase),j.css=j.js?"-"+j.lowercase+"-":j.js,j.properties="{"+j.css+"animation-duration: 0.0001s;"+j.css+"animation-name: nodeInserted !important;"+"}";var i=document.getElementsByTagName("head")[0],p=document.createElement("style"),o=document.createTextNode("@"+j.css+"keyframes nodeInserted {"+"from { clip: rect(1px, auto, auto, auto); } to { clip: rect(0px, auto, auto, auto); }"+"}");p.type="text/css",p.appendChild(o),i.appendChild(p);var n=function(e,d,f){switch(xtag.typeOf(f)){case"object":xtag.typeOf(e[d])=="object"?xtag.merge(e[d],f):e[d]=xtag.clone(f);break;case"array":e[d]=xtag.toArray(f);break;default:e[d]=f;}return e;},m=function(e,d,f){return function(c){!!~d.match(/(\d+)/g).indexOf(String(c.keyCode))==(f=="keypass")&&e.apply(this,xtag.toArray(arguments));};};xtag={namespace:"x-",prefix:j,tags:{},callbacks:{},sheet:p.sheet,anchor:document.createElement("a"),tagOptions:{content:"",mixins:[],events:{},methods:{},getters:{},setters:{},onCreate:function(){},onInsert:function(){}},eventMap:{animationstart:["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],transitionend:["transitionend","oTransitionEnd","MSTransitionEnd","webkitTransitionEnd"],tap:["ontouchend" in document?"touchend":"mouseup"]},pseudos:{delegate:function(g,f,r,q){var h=xtag.query(this,f).filter(function(c){return c==q.target||c.contains?c.contains(q.target):!1;})[0];return h?function(){g.apply(h,xtag.toArray(arguments));}:!1;},keystop:m,keypass:m,retain:function(h,g,t,s,r){var q=r[s];return function(){h(),typeof q!="undefined"&&(r[s]=q);};},preventable:function(e,d,f){return function(c){c.defaultPrevented||e.apply(this,xtag.toArray(arguments));};}},mixins:{request:{onInsert:function(){this.src=this.getAttribute("src");},getters:{"dataready:retain":function(){return this.xtag.dataready;}},setters:{src:function(c){c&&(this.setAttribute("src",c),xtag.request(this,{url:c,method:"GET"}));},"dataready:retain":function(c){this.xtag.dataready=c,this.xtag.request&&this.xtag.request.readyState==4&&c.call(this,this.xtag.request);}}}},typeOf:function(c){return{}.toString.call(c).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},toArray:function(d){var c=Array.prototype.slice.call(d,0);return c.hasOwnProperty?c:[d];},hasClass:function(d,c){return !!~d.className.split(" ").indexOf(c);},addClass:function(d,c){return xtag.hasClass(d,c)||(d.className=d.className+" "+c),d;},removeClass:function(d,c){return d.className=d.className.replace(new RegExp("(^|\\s)"+c+"(?:\\s|$)"),"$1"),d;},toggleClass:function(d,c){return xtag.hasClass(d,c)?xtag.removeClass(d,c):xtag.addClass(d,c);},query:function(d,c){return xtag.toArray(d.querySelectorAll(c));},clone:function(d){var c=function(){};return c.prototype=d,new c;},merge:function(q,e,v){if(xtag.typeOf(e)=="string"){return n(q,e,v);}for(var u=1,t=arguments.length;u<t;u++){var s=arguments[u];for(var r in s){n(q,r,s[r]);}}return q;},wrap:function(d,c){return function(){var e=xtag.toArray(arguments);d.apply(this,e),c.apply(this,e);};},skipTransition:function(f,e,h){var g=xtag.prefix.js+"TransitionDuration";f.style[g]="0.001s",e.call(h),xtag.addEvent(f,"transitionend",function(){f.style[g]="";});},tagCheck:function(c){return c.tagName.match(new RegExp(xtag.namespace,"i"));},getTag:function(c){return(c.tagName?c.tagName.split("-")[1]:"").toLowerCase();},getOptions:function(c){return xtag.tags[xtag.getTag(c)]||xtag.tagOptions;},register:function(d,c){xtag.attachKeyframe("nodeInserted",xtag.namespace+d),xtag.tags[d]=xtag.merge({},xtag.tagOptions,xtag.applyMixins(c));},attachKeyframe:function(d,e){xtag.sheet.insertRule(e+j.properties,0);},extendElement:function(e){if(!e.xtag){e.xtag={};var d=xtag.getOptions(e);for(var f in d.methods){xtag.bindMethods(e,f,d.methods[f]);}for(var f in d.setters){xtag.applyAccessor(e,"set",f,d.setters[f]);}for(var f in d.getters){xtag.applyAccessor(e,"get",f,d.getters[f]);}xtag.addEvents(e,d.events,d.eventMap),d.content&&(e.innerHTML=d.content),d.onCreate.call(e);}},bindMethods:function(e,d,f){e.xtag[d]=function(){return f.apply(e,xtag.toArray(arguments));};},applyMixins:function(c){return c.mixins&&c.mixins.forEach(function(e){var g=xtag.mixins[e];for(var f in g){switch(xtag.typeOf(g[f])){case"function":c[f]=c[f]?xtag.wrap(c[f],g[f]):g[f];break;case"object":c[f]=xtag.merge({},g[f],c[f]);break;default:c[f]=g[f];}}}),c;},applyAccessor:function(g,f,r,q){var f=f[0].toUpperCase(),h=r.split(":")[0];xtag.applyPseudos(g,r,function(){g["__define"+f+"etter__"](h,q);},[h,g]);},applyPseudos:function(g,f,r,q){var h=r,q=xtag.toArray(q);f.match(":")&&f.replace(/:(\w*)(?:\(([^\)]*)\))?/g,function(c,t,s){if(h){var e=xtag.toArray(q);e.unshift(h,s,t);var d=xtag.pseudos[t].apply(g,e);h=d===!1?!1:d||r;}}),h&&h.apply(g,q);},request:function(h,u){xtag.clearRequest(h);var t=h.xtag.request||{};h.xtag.request=u;var s=h.xtag.request,r=h.getAttribute("data-callback-key")||"callback=xtag.callbacks.";if(xtag.fireEvent(h,"beforerequest")===!1){return !1;}if(t.url&&!u.update&&t.url.replace(new RegExp("&?("+r+"x[0-9]+)"),"")==h.xtag.request.url){return h.xtag.request=t,!1;}h.setAttribute("src",h.xtag.request.url),xtag.anchor.href=u.url;if(xtag.anchor.hostname==window.location.hostname){s=xtag.merge(new XMLHttpRequest,s),s.onreadystatechange=function(){h.setAttribute("data-readystate",s.readyState),s.readyState==4&&s.status<400&&xtag.requestCallback(h,s);},["error","abort","load"].forEach(function(c){s["on"+c]=function(d){d.request=s,xtag.fireEvent(h,c,d);};}),s.open(s.method,s.url,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send();}else{var q=s.callbackID="x"+(new Date).getTime();h.setAttribute("data-readystate",s.readyState=0),xtag.callbacks[q]=function(c){s.status=200,s.readyState=4,s.responseText=c,xtag.requestCallback(h,s),delete xtag.callbacks[q],xtag.clearRequest(h);
},s.script=document.createElement("script"),s.script.type="text/javascript",s.script.src=u.url=u.url+(~u.url.indexOf("?")?"&":"?")+r+q,s.script.onerror=function(c){h.setAttribute("data-readystate",s.readyState=4),h.setAttribute("data-requeststatus",s.status=400),xtag.fireEvent(h,"error",c);},i.appendChild(s.script);}h.xtag.request=s;},requestCallback:function(d,c){if(c!=d.xtag.request){return xtag;}d.setAttribute("data-readystate",c.readyState),d.setAttribute("data-requeststatus",c.status),xtag.fireEvent(d,"dataready",{request:c}),d.dataready&&d.dataready.call(d,c);},clearRequest:function(d){var e=d.xtag.request;if(!e){return xtag;}e.script&&~xtag.toArray(i.children).indexOf(e.script)?i.removeChild(e.script):e.abort&&e.abort();},addEvent:function(h,g,t,s){var r=g.split(":")[0],q=(s||xtag.eventMap||{})[r]||[r];q.forEach(function(c){h.addEventListener(c,function(e){xtag.applyPseudos(h,g,t,[e,h]);},!!~["focus","blur"].indexOf(c));});},addEvents:function(f,e,h){for(var g in e){xtag.addEvent(f,g,e[g],h);}},fireEvent:function(f,e,h){var g=document.createEvent("Event");g.initEvent(e,!0,!0),f.dispatchEvent(xtag.merge(g,h));}};var l=document.createElement;document.createElement=function(d){var c=l.call(this,d);return xtag.tagCheck(c)&&xtag.extendElement(c),c;};var k=function(c){c.animationName=="nodeInserted"&&xtag.tagCheck(c.target)&&(xtag.extendElement(c.target),xtag.getOptions(c.target).onInsert.call(c.target));};xtag.eventMap.animationstart.forEach(function(c){document.addEventListener(c,k,!1);});})();xtag.namespace="y-";var a={button:{content:"<div></div>",requires:["button"],create:function(d,c){return new d.Button(c);}},dial:{content:'<div class="yui3-skin-sam"></div>',requires:["dial"],create:function(d,c){return new d.Dial(c);}},suggest:{content:'<div class="yui3-skin-sam"><input type="text" /></div>',selector:"input",requires:["autocomplete","autocomplete-highlighters"],create:function(d,c){c.srcNode.plug(d.Plugin.AutoComplete,{resultHighlighter:"phraseMatch",source:'select * from search.suggest where query="{query}"',yqlEnv:"http://pieisgood.org/yql/tables.env"});return c.srcNode;}}};b.ytag={register:function(d,e){var c;xtag.register(d,{content:e.content,onInsert:function(){var f=b.merge(this.dataset,{srcNode:b.one(this).one(e.selector?e.selector:"*"),render:true});b.use.apply(b,e.requires.concat(function(g){c=e.create(g,f);}));},getters:{ytag:function(){return c;}}});}};b.Object.each(a,function(d,c){b.ytag.register(c,d);});},"@VERSION@",{skinnable:false,requires:["node"]});