YUI.add("gallery-ytag",function(b){(function(){var j={js:["","O","MS","Moz","WebKit"].filter(function(k){return window[k+"CSSKeyframesRule"];})[0]};j.lowercase=j.js.toLowerCase();if(j.js=="WebKit"){j.js=j.lowercase;}j.css=j.js?"-"+j.lowercase+"-":j.js;j.properties="{"+j.css+"animation-duration: 0.0001s;"+j.css+"animation-name: nodeInserted !important;"+"}";var d=document.getElementsByTagName("head")[0],g=document.createElement("style"),f=document.createTextNode("@"+j.css+"keyframes nodeInserted {"+"from { clip: rect(1px, auto, auto, auto); } to { clip: rect(0px, auto, auto, auto); }"+"}");g.type="text/css";g.appendChild(f);d.appendChild(g);var i=function(l,k,m){switch(xtag.typeOf(m)){case"object":if(xtag.typeOf(l[k])=="object"){xtag.merge(l[k],m);}else{l[k]=xtag.clone(m);}break;case"array":l[k]=xtag.toArray(m);break;default:l[k]=m;}return l;},h=function(k,m,l){return function(n){if(!!~m.match(/(\d+)/g).indexOf(String(n.keyCode))==(l=="keypass")){k.apply(this,xtag.toArray(arguments));}};};xtag={namespace:"x-",prefix:j,tags:{},callbacks:{},sheet:g.sheet,anchor:document.createElement("a"),tagOptions:{content:"",mixins:[],events:{},methods:{},getters:{},setters:{},onCreate:function(){},onInsert:function(){}},eventMap:{animationstart:["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],transitionend:["transitionend","oTransitionEnd","MSTransitionEnd","webkitTransitionEnd"],tap:["ontouchend" in document?"touchend":"mouseup"]},pseudos:{delegate:function(k,n,m,l){var o=xtag.query(this,n).filter(function(p){return p==l.target||p.contains?p.contains(l.target):false;})[0];return o?function(){k.apply(o,xtag.toArray(arguments));}:false;},keystop:h,keypass:h,retain:function(l,o,n,m,k){var p=k[m];return function(){l();if(typeof p!="undefined"){k[m]=p;}};},preventable:function(k,m,l){return function(n){if(!n.defaultPrevented){k.apply(this,xtag.toArray(arguments));}};}},mixins:{request:{onInsert:function(){this.src=this.getAttribute("src");},getters:{"dataready:retain":function(){return this.xtag.dataready;}},setters:{src:function(k){if(k){this.setAttribute("src",k);xtag.request(this,{url:k,method:"GET"});}},"dataready:retain":function(k){this.xtag.dataready=k;if(this.xtag.request&&this.xtag.request.readyState==4){k.call(this,this.xtag.request);}}}}},typeOf:function(k){return({}).toString.call(k).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},toArray:function(l){var k=Array.prototype.slice.call(l,0);return k.hasOwnProperty?k:[l];},hasClass:function(k,l){return !!~k.className.split(" ").indexOf(l);},addClass:function(k,l){if(!xtag.hasClass(k,l)){k.className=(k.className+" "+l);}return k;},removeClass:function(k,l){k.className=k.className.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)"),"$1");return k;},toggleClass:function(k,l){return !xtag.hasClass(k,l)?xtag.addClass(k,l):xtag.removeClass(k,l);},query:function(l,k){return xtag.toArray(l.querySelectorAll(k));},clone:function(l){var k=function(){};k.prototype=l;return new k();},merge:function(s,o,n){if(xtag.typeOf(o)=="string"){return i(s,o,n);}for(var r=1,m=arguments.length;r<m;r++){var p=arguments[r];for(var q in p){i(s,q,p[q]);}}return s;},wrap:function(k,l){return function(){var m=xtag.toArray(arguments);k.apply(this,m);l.apply(this,m);};},skipTransition:function(k,l,n){var m=xtag.prefix.js+"TransitionDuration";k.style[m]="0.001s";l.call(n);xtag.addEvent(k,"transitionend",function(){k.style[m]="";});},tagCheck:function(k){return k.tagName.match(new RegExp(xtag.namespace,"i"));},getTag:function(k){return(k.tagName?k.tagName.split("-")[1]:"").toLowerCase();},getOptions:function(k){return xtag.tags[xtag.getTag(k)]||xtag.tagOptions;},register:function(k,l){xtag.attachKeyframe("nodeInserted",xtag.namespace+k);xtag.tags[k]=xtag.merge({},xtag.tagOptions,xtag.applyMixins(l));},attachKeyframe:function(l,k){xtag.sheet.insertRule(k+j.properties,0);},extendElement:function(l){if(!l.xtag){l.xtag={};var k=xtag.getOptions(l);for(var m in k.methods){xtag.bindMethods(l,m,k.methods[m]);}for(var m in k.setters){xtag.applyAccessor(l,"set",m,k.setters[m]);}for(var m in k.getters){xtag.applyAccessor(l,"get",m,k.getters[m]);}xtag.addEvents(l,k.events,k.eventMap);if(k.content){l.innerHTML=k.content;}k.onCreate.call(l);}},bindMethods:function(l,k,m){l.xtag[k]=function(){return m.apply(l,xtag.toArray(arguments));};},applyMixins:function(k){if(k.mixins){k.mixins.forEach(function(m){var l=xtag.mixins[m];for(var n in l){switch(xtag.typeOf(l[n])){case"function":k[n]=k[n]?xtag.wrap(k[n],l[n]):l[n];break;case"object":k[n]=xtag.merge({},l[n],k[n]);break;default:k[n]=l[n];}}});}return k;},applyAccessor:function(m,k,l,o){var k=k[0].toUpperCase(),n=l.split(":")[0];xtag.applyPseudos(m,l,function(){m["__define"+k+"etter__"](n,o);},[n,m]);},applyPseudos:function(m,l,n,k){var o=n,k=xtag.toArray(k);if(l.match(":")){l.replace(/:(\w*)(?:\(([^\)]*)\))?/g,function(p,s,r){if(o){var t=xtag.toArray(k);t.unshift(o,r,s);var q=xtag.pseudos[s].apply(m,t);o=q===false?false:q||n;}});}if(o){o.apply(m,k);}},request:function(m,l){xtag.clearRequest(m);var p=m.xtag.request||{};m.xtag.request=l;var o=m.xtag.request,k=m.getAttribute("data-callback-key")||"callback"+"=xtag.callbacks.";if(xtag.fireEvent(m,"beforerequest")===false){return false;}if(p.url&&!l.update&&p.url.replace(new RegExp("&?("+k+"x[0-9]+)"),"")==m.xtag.request.url){m.xtag.request=p;return false;}m.setAttribute("src",m.xtag.request.url);xtag.anchor.href=l.url;if(xtag.anchor.hostname==window.location.hostname){o=xtag.merge(new XMLHttpRequest(),o);o.onreadystatechange=function(){m.setAttribute("data-readystate",o.readyState);if(o.readyState==4&&o.status<400){xtag.requestCallback(m,o);}};["error","abort","load"].forEach(function(q){o["on"+q]=function(r){r.request=o;xtag.fireEvent(m,q,r);};});o.open(o.method,o.url,true);o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");o.send();}else{var n=o.callbackID="x"+new Date().getTime();m.setAttribute("data-readystate",o.readyState=0);xtag.callbacks[n]=function(q){o.status=200;
o.readyState=4;o.responseText=q;xtag.requestCallback(m,o);delete xtag.callbacks[n];xtag.clearRequest(m);};o.script=document.createElement("script");o.script.type="text/javascript";o.script.src=l.url=l.url+(~l.url.indexOf("?")?"&":"?")+k+n;o.script.onerror=function(q){m.setAttribute("data-readystate",o.readyState=4);m.setAttribute("data-requeststatus",o.status=400);xtag.fireEvent(m,"error",q);};d.appendChild(o.script);}m.xtag.request=o;},requestCallback:function(k,l){if(l!=k.xtag.request){return xtag;}k.setAttribute("data-readystate",l.readyState);k.setAttribute("data-requeststatus",l.status);xtag.fireEvent(k,"dataready",{request:l});if(k.dataready){k.dataready.call(k,l);}},clearRequest:function(k){var l=k.xtag.request;if(!l){return xtag;}if(l.script&&~xtag.toArray(d.children).indexOf(l.script)){d.removeChild(l.script);}else{if(l.abort){l.abort();}}},addEvent:function(l,n,m,p){var k=n.split(":")[0],o=(p||xtag.eventMap||{})[k]||[k];o.forEach(function(q){l.addEventListener(q,function(r){xtag.applyPseudos(l,n,m,[r,l]);},!!~["focus","blur"].indexOf(q));});},addEvents:function(l,k,m){for(var n in k){xtag.addEvent(l,n,k[n],m);}},fireEvent:function(k,l,n){var m=document.createEvent("Event");m.initEvent(l,true,true);k.dispatchEvent(xtag.merge(m,n));}};var e=document.createElement;document.createElement=function(k){var l=e.call(this,k);if(xtag.tagCheck(l)){xtag.extendElement(l);}return l;};var c=function(k){if(k.animationName=="nodeInserted"&&xtag.tagCheck(k.target)){xtag.extendElement(k.target);xtag.getOptions(k.target).onInsert.call(k.target);}};xtag.eventMap.animationstart.forEach(function(k){document.addEventListener(k,c,false);});})();xtag.namespace="y-";function a(c){a.superclass.constructor.apply(this,arguments);}a.NAME="ytag";b.extend(a,b.Base,{initializer:function(c){this.register(c.name,c.content,c.selector,c.requires,c.create);},register:function(e,h,d,g,f){var c;xtag.register(e,{content:h,onInsert:function(){var i=b.merge(this.dataset,{srcNode:b.one(this).one(d?d:"*"),render:true});b.use.apply(b,g.concat(function(j){c=f(j,i);}));},getters:{ytag:function(){return c;}}});}});b.YTag=a;},"@VERSION@",{skinnable:false,requires:["node","base"]});