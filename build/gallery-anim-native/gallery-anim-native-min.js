YUI.add("gallery-anim-native",function(e,t){"use strict";var n=["","webkit","Moz","O","ms"].filter(function(t){return e.config.doc.body.style.hasOwnProperty(t+"Animation")})[0],r=n?"-"+n.toLowerCase()+"-":n,i={webkit:"webkitAnimationEnd",O:"oAnimationEnd"},s="animationend",o=i[n]||s,u=function(){u.superclass.constructor.apply(this,arguments)};e.Node.DOM_EVENTS[o]=1,u.NAME="animNative",u.DIRECTIONS={normal:["normal","reverse"],alternate:["alternate","alternate-reverse"]},u.EASINGS={easeNone:{p1:.25,p2:.25,p3:.75,p4:.75},easeIn:{p1:.42,p2:0,p3:1,p4:1},easeOut:{p1:0,p2:0,p3:.58,p4:1},easeBoth:{p1:.42,p2:0,p3:.58,p4:1},easeInStrong:{p1:.895,p2:.03,p3:.685,p4:.22},easeOutStrong:{p1:.165,p2:.84,p3:.44,p4:1},easeBothStrong:{p1:.77,p2:0,p3:.175,p4:1},backOut:{p1:.175,p2:.885,p3:.32,p4:1.275},backBoth:{p1:.68,p2:-0.55,p3:.265,p4:1.55},elasticIn:{p1:.25,p2:.25,p3:.75,p4:.75},elasticOut:{p1:.25,p2:.25,p3:.75,p4:.75},elasticBoth:{p1:.25,p2:.25,p3:.75,p4:.75},backIn:{p1:.25,p2:.25,p3:.75,p4:.75},bounceIn:{p1:.25,p2:.25,p3:.75,p4:.75},bounceOut:{p1:.25,p2:.25,p3:.75,p4:.75},bounceBoth:{p1:.25,p2:.25,p3:.75,p4:.75}},u.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,u.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,u.DEFAULT_UNIT="px",u._easing=function(e){var t=u.EASINGS[e];return"cubic-bezier("+t.p1+", "+t.p2+", "+t.p3+", "+t.p4+")"},u._toHyphen=function(e){return e=e.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(e,t,n,r){var i=(t?"-"+t.toLowerCase():"")+n;return r&&(i+="-"+r.toLowerCase()),i}),e},u._insert=function(t){var n=e.config.doc,r,i;if(n.styleSheets&&n.styleSheets.length){r=0;try{n.styleSheets[0].cssRules.length>0&&(r=n.styleSheets[0].cssRules.length),n.styleSheets[0].insertRule(t,r)}catch(s){}}else i=n.createElement("style"),i.innerHTML=t,n.head.appendChild(i)},u._delete=function(t){var n=e.config.doc,r=n.all?"rules":"cssRules",i;for(i=0;i<n.styleSheets[0][r].length;i+=1)if(n.styleSheets[0][r][i].name===t){n.styleSheets[0].deleteRule(i);break}},u.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:"easeNone",setter:function(e){return u._easing(e)}},from:{value:{}},frames:{value:{}},to:{value:{}},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return this.get("node").getStyle(n+"AnimationName")!=="none"},value:!1,readOnly:!0},delay:{value:0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{getter:function(){return this.get("node").getStyle(n+"AnimationPlayState")==="paused"},readOnly:!0,value:!1},reverse:{value:!1},perspective:{value:1e3},perspectiveOrigin:{value:"center center"},backfaceVisibility:{value:"visible"}},e.extend(u,e.Base,{initializer:function(e){},run:function(){return this.get("paused")?this._resume():this.get("running")||this._start(),this},pause:function(){return this.get("running")&&(this.get("node").setStyle(n+"AnimationPlayState","paused"),this.fire("pause")),this},stop:function(e){return this._end(),this},_resume:function(){this.get("node").setStyle(n+"AnimationPlayState","running"),this.fire("resume")},_start:function(){var t=this.get("node"),r=t.get("parentNode"),i="anim-"+e.guid(),s=u.DIRECTIONS[this.get("direction")][+this.get("reverse")],a=this.get("from"),f=this.get("to"),l=this.get("frames"),c={},h,p;c["0%"]=a,c=e.merge(c,l),c["100%"]=f,h=this._render(t,i,c),this.get("iterations")!=="infinite"&&(p=this.get("iterations")%(2-this.get("reverse"))*100,t.setStyles(h.styles[p+"%"])),u._insert(h.css),this.set("iterationCount",0),r.setStyle(n+"Perspective",this.get("perspective")+"px"),r.setStyle(n+"PerspectiveOrigin",this.get("perspectiveOrigin")),t.setStyle(n+"AnimationDuration",this.get("duration")+"s"),t.setStyle(n+"AnimationTimingFunction",this.get("easing")),t.setStyle(n+"AnimationDelay",this.get("delay")+"s"),t.setStyle(n+"AnimationIterationCount",this.get("iterations")),t.setStyle(n+"AnimationDirection",s),t.setStyle(n+"AnimationPlayState","running"),t.setStyle(n+"BackfaceVisibility",this.get("backfaceVisibility")),t.setStyle(n+"AnimationName",i),this.fire("start"),this._sub=t.on(o,this._end,this)},_end:function(){var e=this.get("node"),t=e.getStyle(n+"AnimationName");e.detach(o,this._end),e.setStyle(n+"AnimationName","none"),e.setStyle(n+"AnimationDuration","0s"),e.setStyle(n+"AnimationTimingFunction","ease"),e.setStyle(n+"AnimationDelay","0s"),e.setStyle(n+"AnimationIterationCount","1"),e.setStyle(n+"AnimationDirection","normal"),e.setStyle(n+"AnimationPlayState","running"),e.setStyle(n+"BackfaceVisibility","visible"),this.set("iterationCount",this.get("iterations")),u._delete(t),this.fire("end",{elapsed:this.get("elapsedTime")})},_render:function(t,n,i){var s=["@"+r+"keyframes "+n+" {"],o={};return e.Object.each(i,function(n,r){s.push("	"+r+" {"),o[r]={},e.Object.each(n,function(e,n){var i;typeof e=="function"&&(e=e.call(this,t)),u.RE_DEFAULT_UNIT.test(n)&&(i=u.RE_UNITS.exec(e),i&&!i[2]&&(e+=u.DEFAULT_UNIT)),o[r][n]=e,s.push("		"+u._toHyphen(n)+": "+e+";")},this),s.push("	}")},this),s.push("}"),{css:s.join("\n"),styles:o}},destructor:function(){this.get("node").detach(o,this._end)}}),e.Anim=u,e.AnimNative=u},"@VERSION@",{use:["node","base"]});
