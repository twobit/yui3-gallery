<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Custom HTML Tags with YUI</title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Maven+Pro:400,700" />
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css" />
    <link rel="stylesheet" href="index.css" />
    <script src="http://yui.yahooapis.com/3.5.0/build/yui/yui-min.js"></script>

    <script type="text/javascript">
    var Y = YUI({
        //Last Gallery Build of this module
        gallery: 'gallery-2012.07.25-21-36',
        groups: {tag: {
            combine: true,
            root: 'gallery-2012.07.25-21-36',
            patterns: {'tag-': {configFn: function(cfg) {
                cfg.path = '/build/gallery-tag-registry/' + cfg.name + '-min.js'
            }}}
        }}
    }).use('gallery-tag', 'datatype', function(Y) {
        Y.Tag.register('slide', {
            created: function(config) {
                this.get('host').append('<div class="paginator"><span class="number"></span>/<span class="total"></span></div>');

                this.addAttr('number', {
                    setter: function(value) {
                        this.get('host').set('id', 'slide-' + value);
                        this.get('host').one('.number').setHTML(value);
                    }
                });

                this.addAttr('total', {
                    setter: function(value) {
                        this.get('host').one('.total').setHTML(value);
                    }
                });
            }
        });

        Y.Tag.register('slides', {
            created: function(config) {
                this.get('host').all('slide').each(function(slide, index, slides) {
                    slide.tag.set('number', index + 1);
                    slide.tag.set('total', slides.size());
                }, this);
            }
        });
    });
    </script>
</head>
<body>
    <slides>
        <slide>
            <hgroup>
                <h1>Custom HTML Tags with YUI</h1>
                <h3>How to Use the <a href="http://yuilibrary.com/gallery/show/tag">Tag Module</a></h3>
            </hgroup>
            <article>
                <ul>
                    <li>Stephen Murphy</li>
                    <li>Yahoo! Search Team</li>
                </ul>
            </article>

            <img src="img/yahoo.gif" />
        </slide>

        <slide>
            <hgroup>
                <h2>Who Am I?</h2>
            </hgroup>
            <article>
                <ul>
                    <li>Senior Software Engineer</li>
                    <li>Yahoo! Search Team</li>
                </ul>
                <ul>
                    <li><a href="http://twitter.com/hypernaut">@hypernaut</a></li>
                    <li><a href="http://github.com/twobit">GitHub</a></li>
                    <li><a href="http://hypernaut.com">Portfolio</a></li>
                </ul>
                <img src="img/me.jpg" />
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>What's a Custom HTML Tag?</h2>
            </hgroup>
            <article>
                <img src="img/custom.jpg" />
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Example</h2>
                <h3>Simple HTML</h3>
            </hgroup>
            <article>
                <p>HTML</p>
                <pre class="code prettyprint">Copyright &copy; &lt;ydate data-format="%Y"&gt;&lt;/ydate&gt; Yahoo! Inc.</pre>

                <p>Output</p>
                <div class="output">Copyright &copy; <ydate data-format="%Y"></ydate> Yahoo! Inc.</div>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Example (cont)</h2>
                <h3>Dynamically Create More Tags</h3>
            </hgroup>
            <article>
                <p>JavaScript</p>
                <pre class="code prettyprint">btn.on('click', function(e) {
    container.append('&lt;ydate data-format="%T"&gt;&lt;/ydate&gt;,&nbsp;');
});</pre>

                <p>Output <input id="append_tag_btn" type="submit" value="New Tag" /></p>
                <div id="append_tag_container" class="output"></div>
                <script type="text/javascript">
                Y.use('node', function(Y) {
                    Y.one('#append_tag_btn').on('click', function(e) {
                        Y.one('#append_tag_container').append('<ydate data-format="%T"></ydate>,&nbsp;');
                    });
                });
                </script>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Example (cont)</h2>
                <h3>Update Existing Tag</h3>
            </hgroup>
            <article>
                <p>HTML</p>
                <pre class="code prettyprint">&lt;ydate data-format="%T"&gt;&lt;/ydate&gt;</pre>

                <p>JavaScript</p>
                <pre class="code prettyprint">btn.on('click', function(e) {
    container.one('ydate').tag.set('date', new Date());
});</pre>

                <p>Output <input id="update_tag_btn" type="submit" value="Update Tag" /></p>
                <div id="update_tag_container" class="output"><ydate data-format="%T"></ydate></div>

                <script type="text/javascript">
                Y.use('node', function(Y) {
                    Y.one('#update_tag_btn').on('click', function(e) {
                        Y.one('#update_tag_container ydate').tag.set('date', new Date());
                    });
                });
                </script>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Example (cont)</h2>
                <h3><em>ydate</em> Definition</h3>
            </hgroup>
            <article>
                <pre class="code prettyprint">Y.Tag.register('ydate', {
    created: function(config) {
        this.addAttr('date', {
            value: new Date(),
            setter: function(value) {
                var date = Y.DataType.Date.format(value, {format: config.format});
                this.get('host').setHTML(date);
                return value;
            }
        });
    }
});</pre>

                <script type="text/javascript">
                Y.use('gallery-tag', function(Y) {
                    Y.Tag.register('ydate', {
                        created: function(config) {
                            this.addAttr('date', {
                                value: new Date(),
                                setter: function(value) {
                                    var date = Y.DataType.Date.format(value, {format: config.format});
                                    this.get('host').setHTML(date);
                                    return value;
                                }
                            });
                        }
                    });
                });
                </script>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Benefits</h2>
            </hgroup>
            <article>
                <p>Get rid of boilerplate markup generation and object instantiation.</p>
                <p>Old and Busted</p>
                <pre class="code prettyprint">Y.one('body').append('&lt;div id="foo"&gt;&lt;/div&gt;');
new Y.Foo({
    srcNode: '#foo'
});</pre>
                <p>New Hotness</p>
                <pre class="code prettyprint">Y.one('body').append('&lt;foo&gt;&lt;/foo&gt;');</pre>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Benefits (cont)</h2>
            </hgroup>
            <article>
                <ul>
                    <li>Easier for non-programmers to use your component &ndash; it's just HTML.</li>
                    <li>Large projects will benefit from not needing to explicitly require modules.</li>
                    <li>Simply append a tag and let the DOM do the work.</li>
                </ul>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>How Does It Work?</h2>
                <h3>Inserted Event</h3>
            </hgroup>
            <article>
                <p>Event fires whenever a selector matches a node. Tag uses this for inserted node events.</p>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>How Does It Work? (cont)</h2>
                <h3>Node Class Plugin</h3>
            </hgroup>
            <article>
                <p>Tag plugin available on all Nodes.</p>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Registering Attributes</h2>
            </hgroup>
            <article>
                <p>Load higher resolution image if available.</p>
                <pre class="code prettyprint">&lt;img highdpi highdpi:alt="@2x" src="img.jpg" /&gt;</pre>

                <p>Tag can have multiple attributes with configs.</p>
                <pre class="code prettyprint">
&lt;foo data-name=&quot;Foo Inc.&quot;
    bar bar:name=&quot;Bar Inc.&quot;
    baz baz:name=&quot;Baz Inc.&quot;&gt;&lt;&#x2F;foo&gt;</pre>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Registering Attributes (cont)</h2>
                <h3><em>highdpi</em> Definition</h3>
            </hgroup>
            <article>
                <pre class="code prettyprint" style="font-size: 17px;">
Y.Tag.register(&#x27;[highdpi]&#x27;, {
    created: function(config) {
        if (Y.config.win.devicePixelRatio &lt;= 1) {return;}

        var host = this.get(&#x27;host&#x27;),
            alt = config.alt || &#x27;@2x&#x27;,
            src = host.get(&#x27;src&#x27;).replace(&#x2F;(\.[a-zA-Z]+)$&#x2F;, function(m) {return alt + m;});
        
        if (src) {
            Y.io(src, {
                method: &#x27;HEAD&#x27;,
                onsuccess: function(e) {
                    host.set(&#x27;src&#x27;, src);
                }
            });
        }
    }
});</pre>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Registering Attributes (cont)</h2>
                <h3>Flexible Registration</h3>
            </hgroup>
            <article>
                <pre class="code prettyprint">
Y.Tag.register(&#x27;example, [example]&#x27;, {});</pre>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Attribute Benefits</h2>
            </hgroup>
            <article>
                <p>Provides more graceful degredation by enhancing existing elements.</p>
                <p>Attributes can support multiple registered components.</p>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Tag Registry</h2>
                <h3>A Collection of Predefined Tags</h3>
            </hgroup>
            <article>
                <p><em>yautocomplete</em></p>
                <pre class="code prettyprint">&lt;yautocomplete data-max-results="i:5"&gt;&lt;/yautocomplete&gt;</pre>

                <div class="output">
                    <yautocomplete data-max-results="i:5"></yautocomplete>
                </div>

                <p><em>ybutton</em></p>
                <pre class="code prettyprint">&lt;ybutton data-label="TEST BUTTON"&gt;&lt;/ybutton&gt;</pre>
                <div class="output">
                    <ybutton data-label="TEST BUTTON"></ybutton>
                    <ybutton data-label="SAMPLE BUTTON" data-disabled="true"></ybutton>
                </div>
            </article>

            <script type="text/javascript">
            Y.use('tag-yautocomplete', 'tag-ybutton');
            </script>
        </slide>

        <slide>
            <hgroup>
                <h2>Tag Registry (cont)</h2>
                <h3><em>ydial</em> Tag</h3>
            </hgroup>
            <article>
                <pre class="code prettyprint">&lt;ydial data-min="-100" data-max="100" data-value="0"&gt;&lt;/ydial&gt;</pre>
                <ydial data-min="-100" data-max="100" data-value="0"></ydial>
            </article>

            <script type="text/javascript">
            Y.use('tag-ydial');
            </script>
        </slide>

        <slide>
            <hgroup>
                <h2>Tag Registry (cont)</h2>
                <h3><em>ycalendar</em> Tag</h3>
            </hgroup>
            <article>
                <pre class="code prettyprint">&lt;ycalendar&gt;&lt;/ycalendar&gt;</pre>
                <ycalendar></ycalendar>
            </article>

            <script type="text/javascript">
            Y.use('tag-ycalendar');
            </script>
        </slide>

        <slide>
            <hgroup>
                <h2>Data Binding</h2>
                <h3>Using the <em>ybind</em> Tag</h3>
            </hgroup>
            <article>
                <input id="name" type="text" placeholder="Enter your name" />
                <p>Hello, <span ybind="#name" ybind:refkeyup></span>! Have a good day, <ybind data-ybind="#name" data-refkeyup></ybind>.</p>

                <pre class="code prettyprint" style="font-size: 15px;">
&lt;input id=&quot;name&quot; type=&quot;text&quot; placeholder=&quot;Enter your name&quot; /&gt;<br/>&lt;p&gt;
&nbsp;&nbsp;Hello, &lt;span ybind=&quot;#name&quot; ybind:refkeyup&gt;&lt;/span&gt;! Have a good day,
&nbsp;&nbsp;&lt;ybind data-ybind=&quot;#name&quot; data-refkeyup&gt;&lt;/ybind&gt;.
&lt;/p&gt;</pre>

                <hr />

                <input id="age" type="range" />
                <p>Age: <span ybind="#age" ybind:refchange></span></p>

                <hr />

                <input id="age2" type="range" ybind="#age3" ybind:refchange />
                <input id="age3" type="range" ybind="#age2" ybind:refchange />
                <p id="test">Age: <span ybind="#age2" ybind:refchange></span></p>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Data Binding (cont)</h2>
                <h3>Using the <em>ybind</em> Tag</h3>
            </hgroup>
            <article>
                <click-counter>
                    <form ybind="click-counter" ybind:onsubmit="clicked">
                        <input type="submit" value="Click" />
                    </form>
                    <p>Total clicks: <span ybind="click-counter" ybind:refcount-change></span></p>
                </click-counter>
                <pre class="code prettyprint" style="font-size: 15px;">
&lt;click-counter&gt;<br/>    &lt;form ybind=&quot;click-counter&quot; ybind:onsubmit=&quot;clicked&quot;&gt;<br/>        &lt;input type=&quot;submit&quot; value=&quot;Click&quot; /&gt;<br/>    &lt;/form&gt;<br/>    &lt;p&gt;Total clicks: &lt;span ybind=&quot;click-counter&quot; ybind:refcount-change&gt;&lt;/span&gt;&lt;/p&gt;<br/>&lt;/click-counter&gt;</pre>

                <pre class="code prettyprint" style="font-size: 15px;">
Y.Tag.register('click-counter', {<br/>    created: function(config) {<br/>        this.addAttr('count', {value: 0});<br/>    },<br/>    clicked: function(e) {<br/>        e.preventDefault();<br/>        this.set('count', this.get('count') + 1);<br/>    }<br/>});</pre>

            </article>

            <script type="text/javascript">
            Y.use('tag-ybind', function(Y) { 
                Y.Tag.register('click-counter', {
                    created: function(config) {
                        this.addAttr('count', {value: 0});
                    },
                    clicked: function(e) {
                        e.preventDefault();
                        this.set('count', this.get('count') + 1);
                    }
                });
            });
            </script>
        </slide>

        <slide>
            <hgroup>
                <h2>What's Next?</h2>
            </hgroup>
            <article>
                <p>Next release will support registering of classes.</p>
                <p>Experiment with server-side support using Node.js and JSDOM.</p>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Learn More</h2>
            </hgroup>
            <article>
                <ul>
                    <li><a href="http://twobit.github.com/yui3-gallery/gallery-tag/">Documentation</a></li>
                    <li><a href="http://yuilibrary.com/gallery/show/tag">Gallery Module</a></li>
                    <li><a href="http://yuilibrary.com/gallery/show/tag-registry">Tag Registry</a></li>
                    <li><a href="http://yuilibrary.com/gallery/show/event-inserted">Inserted Event</a></li>
                    <li><a href="http://www.yuiblog.com/blog/2012/07/24/yui-open-hours-thurs-july-26th/">YUI Open Hours Talk</a></li>
                    <li><a href="http://www.w3.org/TR/2012/WD-components-intro-20120522/#custom-element-section">W3C Web Components Spec</a></li>
                    <li><a href="http://mozilla.github.com/x-tag/">X-Tag</a> - Initial inspiration for Tag Module.</li>
                </ul>
            </article>
        </slide>

        <slide>
            <hgroup>
                <h2>Questions/Comments?</h2>
            </hgroup>
        </slide>
    </slides>

    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
</body>
</html>
